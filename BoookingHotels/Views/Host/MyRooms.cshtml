@model IEnumerable<BoookingHotels.Models.Room>
@{
    ViewData["Title"] = "Phòng của tôi";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="fw-bold text-success"><i class="bi bi-door-closed me-2"></i>Danh sách phòng</h2>
        <a asp-action="MyHotels" class="btn btn-secondary shadow-sm">
            <i class="bi bi-arrow-left"></i> Quay lại khách sạn
        </a>
    </div>

    <div class="card shadow-sm rounded-4">
        <div class="card-body">
            <table class="table table-hover align-middle">
                <thead class="table-success">
                    <tr>
                        <th>#</th>
                        <th>Tên phòng</th>
                        <th>Khách sạn</th>
                        <th>Giá</th>
                        <th>Sức chứa</th>
                        <th class="text-center">Ảnh</th>
                        <th class="text-center">Hành động</th>
                    </tr>
                </thead>
                <tbody>
                    @if (Model.Any())
                    {
                        int stt = 1;
                        foreach (var room in Model)
                        {
                            <tr>
                                <td>@stt</td>
                                <td>@room.Name</td>
                                <td>@room.Hotel?.Name</td>
                                <td>@string.Format("{0:N0} VNĐ", room.Price)</td>
                                <td>@room.Capacity</td>
                                <td class="text-center">
                                    @{
                                        var photo = room.Photos?.FirstOrDefault();
                                        if (photo != null)
                                        {
                                            <img src="@photo.Url" alt="room" width="80" class="rounded" />
                                        }
                                        else
                                        {
                                            <span class="text-muted">Chưa có ảnh</span>
                                        }
                                    }
                                </td>
                                <td class="text-center">
                                    <a asp-action="EditRoom" asp-route-id="@room.RoomId" class="btn btn-sm btn-primary">
                                        <i class="bi bi-pencil-square"></i> Sửa
                                    </a>
                                    <a asp-action="DeleteRoom" asp-route-id="@room.RoomId" class="btn btn-sm btn-danger"
                                       onclick="return confirm('Bạn có chắc muốn xóa phòng này?')">
                                        <i class="bi bi-trash"></i> Xóa
                                    </a>
                                </td>
                            </tr>
                            stt++;
                        }
                    }
                    else
                    {
                        <tr>
                            <td colspan="7" class="text-center text-muted">Bạn chưa tạo phòng nào.</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>
